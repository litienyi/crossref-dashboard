// Given an array of DOIs ([DOIs])

const dois = [
    "10.2307/3351244",
    "10.1515/9789048554416-002",
    "10.1007/978-90-481-8909-0_9",
    "10.1215/9780822385615",
    "10.1007/978-3-030-83966-6",
    "10.4324/9781003031567-10",
    "10.1515/9780822385615",
    "10.1017/cbo9780511778247.010",
    "10.21832/9781783094295-003",
    "10.2307/j.ctv11hpkx9",
    "10.5117/9789463722469_intro",
    "10.21832/gao3825",
    "10.4324/9781003254157-12",
    "10.2307/j.ctv253f82s.80",
    "10.21832/9781800413832",
    "10.7765/9781526139795.00012",
    "10.1215/10642684-2007-041",
    "10.1177/136754940100400402",
    "10.1007/978-981-13-6844-8_52-1",
    "10.1007/978-981-16-0924-4_52",
    "10.7765/9781526139795",
    "10.1057/9781403982988_1",
    "10.1007/978-1-4614-2131-3_2",
    "10.15519/dcc.2017.06.7.2.233",
    "10.1075/japc.00062.kro",
    "10.2307/j.ctv11hpkx9.10",
    "10.1057/978-1-137-58258-4_1",
    "10.4324/9781315696010-14",
    "10.1215/9780822385615-007",
    "10.2979/globalsouth.6.1.98",
    "10.1163/9789004272286_006",
    "10.4324/9781003211976",
    "10.1080/14631360903189666",
    "10.1215/25783491-9290647",
    "10.1017/9789048554416.007",
    "10.1007/978-3-030-83966-6_1",
    "10.5117/9789463722469_concl",
    "10.1007/978-1-4614-2131-3_6",
    "10.1163/030382494x00089",
    "10.1515/9781478022220-010",
    "10.1515/9789048554416-008",
    "10.1355/9789812307972-021",
    "10.4324/9780203574164-8",
    "10.4324/9781351203470-8",
    "10.4324/9781351119146-17",
    "10.1007/978-3-030-83966-6_2",
    "10.1007/978-1-4614-2131-3_1",
    "10.2307/j.ctv11hpqzr.15",
    "10.1080/10357823.2023.2169039",
    "10.1515/9780822385615-008",
    "10.4324/9781315670812",
    "10.1163/179325407788639768",
    "10.1080/14781700.2011.528681",
    "10.1007/978-90-481-8909-0_2",
    "10.1353/jco.2007.0039",
    "10.1080/0895769x.2017.1387850",
    "10.1386/jcca.3.1-2.13_1",
    "10.1080/01596306.2023.2200080",
    "10.4324/9781351118828-8",
    "10.18574/nyu/9781479890521.003.0006",
    "10.1007/978-0-230-39368-4_8",
    "10.21832/9781800413832-002",
    "10.1007/978-90-481-8909-0_8",
    "10.18574/nyu/9781479890521.003.0005",
    "10.1080/01472526.2013.834792",
    "10.1515/9781474430357-010",
    "10.1163/9789004488526_006",
    "10.1515/9780822380160-002",
    "10.1007/978-3-031-35143-3_3",
    "10.4324/9781315144764-8",
    "10.1057/9781137537751_13",
    "10.1080/00472330480000221",
    "10.1057/9781137289452_5",
    "10.3130/aija.82.2097",
    "10.4000/chinaperspectives.10063",
    "10.1142/11565",
    "10.4324/9781315081342-4",
    "10.2307/303586",
    "10.1016/j.langcom.2020.11.005",
    "10.59962/9780774825931",
    "10.1111/j.1468-0106.2007.00338.x",
    "10.4324/9781003211976-5",
    "10.4324/9780429343599-16",
    "10.1163/9789004300279_006",
    "10.1007/978-981-10-7401-1_5",
    "10.1080/00472336.2018.1562561",
    "10.1355/sj7-1d",
    "10.4324/9780429280016-12",
    "10.1080/14649373.2011.532977",
    "10.1086/722889",
    "10.1016/j.annals.2016.09.007",
    "10.1163/9789042028463_015",
    "10.1007/978-3-319-10034-0_5",
    "10.21832/9781800413832-006",
    "10.1080/08949460590914822",
    "10.1525/9780520942431-010",
    "10.1142/9789811210792_0005",
    "10.1142/9789813235250_0013",
    "10.1017/cbo9781316026991.001",
    "10.1007/978-3-030-73069-7_9",
    "10.1353/tcc.2012.0012",
    "10.1179/1521538512z.0000000006",
    "10.4324/9780429276439-9",
    "10.4324/9780429320224-9",
    "10.4324/9781315240756-14",
    "10.1080/10357823.2021.1948968",
    "10.2307/2658947",
    "10.1142/9789811212352_0005",
    "10.4324/9780429322464-6",
    "10.1080/17544750.2011.647748",
    "10.1080/00086495.2021.1926694",
    "10.1108/aeds-10-2019-187",
    "10.1355/sj33-sb",
    "10.59962/9780774852234-010",
    "10.56397/as.2022.08.08",
    "10.2307/j.ctv36xvj78.12",
    "10.1142/9789811210792_0006",
    "10.1080/13688790.2018.1440886",
    "10.4324/9780367815714-1",
    "10.1080/01425692.2014.971944",
    "10.1108/tr-02-2021-0088",
    "10.1142/12980",
    "10.1057/9780230592049_9",
    "10.4324/9781315204529-8",
    "10.1007/978-981-33-6096-9_12",
    "10.33596/anth.278",
    "10.7765/9781526139795.00008",
    "10.1007/s12140-011-9142-3",
    "10.1142/11609",
    "10.21832/9781800413832-003",
    "10.2307/1586940",
    "10.21832/9781800413832-005",
    "10.1080/14631369.2018.1539826",
    "10.1142/ac051",
    "10.17507/jltr.1204.14",
    "10.5790/hongkong/9789622099456.003.0012",
    "10.1163/9781848881174_002",
    "10.1016/j.langcom.2020.10.004",
    "10.1177/0268580914544430",
    "10.1007/978-1-4614-2131-3_5",
    "10.1142/12979",
    "10.4000/chinaperspectives.8132",
    "10.1007/978-981-33-6096-9_15",
    "10.1016/j.langcom.2021.01.006",
    "10.4324/9780429059704-33",
    "10.2307/j.ctv16zk03m.42",
    "10.1163/24522015-16010001",
    "10.1177/20594364231190313",
    "10.1080/02560046.2017.1405447",
    "10.1080/14649373.2018.1422346",
    "10.4324/9780203996492-10",
    "10.2307/j.ctt1zkjzkd.6",
    "10.1007/978-981-15-4538-2_15",
    "10.4324/9780429485497-1",
    "10.1080/14631369.2012.722448",
    "10.4324/9780203095362-11",
    "10.4159/9780674978898-078",
    "10.17516/1997-1370-0337",
    "10.1007/978-981-15-4538-2_1",
    "10.16993/bat.e",
    "10.2307/2950323",
    "10.4324/9781315670812-20",
    "10.1353/ecy.2016.0036",
    "10.5782/2223-2621.2016.19.4.56",
    "10.1215/10679847-14-1-7",
    "10.1080/09523367.2013.866093",
    "10.1080/19388160.2012.703929",
    "10.1080/14631369.2014.1001148",
    "10.1177/1749975517731079c",
    "10.1007/978-981-10-4014-6_4",
    "10.1080/14631369.2018.1481731",
    "10.1080/14649373.2023.2221496",
    "10.59962/9780774825931-004",
    "10.1080/14631369.2014.1001161",
    "10.1007/s40636-020-00183-0",
    "10.1007/978-1-4614-2131-3_7",
    "10.5860/choice.48-2850",
    "10.1080/07494460701652996",
    "10.3130/aija.84.1101",
    "10.7763/ijssh.2015.v5.589",
    "10.1007/978-981-33-6096-9_5",
    "10.1007/s12140-007-9011-2",
    "10.1007/978-981-33-6096-9_9",
    "10.1007/s13384-014-0152-1",
    "10.1386/jcca.3.1-2.91_1",
    "10.1163/9789004375376_005",
    "10.2307/303809",
    "10.4324/9780429425202-5",
    "10.1080/08276331.1993.10600429",
    "10.1007/978-981-10-5595-9_2",
    "10.7202/1008331ar",
    "10.1163/9789004293380_007",
    "10.1086/725627",
    "10.4324/9780203095362-17",
    "10.1515/9789048535057-004",
    "10.2307/j.ctvt6rn2c.16",
    "10.51661/bjocs.v10i0.117",
    "10.21315/kajh2020.27.1.1",
    "10.1163/2210-7975_hrd-0140-0015"
]
let p = []
const oaRoot = "https://api.openalex.org/works/https://doi.org/"
let oaID = []

for (doi of dois) {
    p.push(
        $.ajax({
            url: oaRoot + doi + "?select=id",
            success: (data) => {oaID.push(data["id"].replace(/.+org\//g, ''))},
            error: () => {console.log("Cannot find OpenAlex ID for this DOI")}
        })
    )
}

Promise.all(p).then(()=> {console.log(oaID)})

{
    DOI:
}


// https://api.openalex.org/works/https://doi.org/10.7717/peerj.4375?select=id
{
    DOI:
    OAURL: // e.g. https://openalex.org/W2741809807
    id: // e.g. W2741809807
}


mainArray = []

// https://api.openalex.org/works/W2741809807?select=referenced_works OR/AND(double check?) https://api.openalex.org/works?filter=cites:W2741809807
{
    DOI:
    OAURL:
    id:
    cites: // https://api.openalex.org/works/W2741809807?select=referenced_works --> [W1560783210, W1724212071, W1767272795,...] including only mainArray articles

        /*
        CODE: 
        $.ajax ({
            url: https://api.openalex.org/works/W2741809807?select=referenced_works,
            success: function (data) {
                let results = data["referenced_works"]
                results = results.map((item) => {item.replace(/.+org\//g, '')})

                let cites = []

                for (result of results) {
                    if (mainArray.includes(result)) {
                        cites.push(result);
                    }
                }

                return cites;
            }
        })
        */

    citedBy: [] //
    
    /* TRIED AND WORKS
    
    const mainArray = ['W3137875885', 'W3123854369', 'W2794944797', 'W3200840849', 'W2895416954']

    $.ajax({
        url: `https://api.openalex.org/works?filter=cites:W2741809807`,
        success: function (data) {
            let results = data["results"]

            let citedBy = []
            for (result of data.results) {
                if (mainArray.includes(result.id.replace(/.+org\//g, ''))) {
                    citedBy.push(result.id.replace(/.+org\//g, ''))
                }
            };
            console.log(citedBy);
            return citedBy;
        }
    });
    
    
    */
}
